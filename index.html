<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CAPITAL // OS v9.9</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;800&family=Space+Grotesk:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* ─── NIGHT MODE (DEFAULT) ─── */
            --bg-void: #050505; --bg-panel: #0a0a0a; --bg-card: #111; --bg-hover: #1a1a1a;
            --border: #333; --border-active: #555;
            --text-main: #e0e0e0; --text-dim: #888; --text-inv: #000;
            /* SIGNALS */
            --cyan: #00f0ff; --cyan-dim: rgba(0, 240, 255, 0.1);
            --gold: #ffd700; --gold-dim: rgba(255, 215, 0, 0.05);
            --green: #00ff9d; --red: #ff2a6d;
            --font-head: 'Space Grotesk', sans-serif; --font-code: 'JetBrains Mono', monospace;
        }
        body.light-mode {
            --bg-void: #e0e0e0; --bg-panel: #f0f0f0; --bg-card: #ffffff; --bg-hover: #e5e5e5;
            --border: #ccc; --border-active: #999;
            --text-main: #111; --text-dim: #555; --text-inv: #fff;
            --cyan: #0066ff; --cyan-dim: rgba(0, 102, 255, 0.1);
            --gold: #d4a000; --gold-dim: rgba(212, 160, 0, 0.05); --green: #00994d;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
        body { background-color: var(--bg-void); color: var(--text-main); font-family: var(--font-head); font-size: 15px; line-height: 1.5; height: 100vh; display: flex; overflow: hidden; transition: background 0.4s, color 0.4s; }
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: var(--bg-void); }
        ::-webkit-scrollbar-thumb { background: var(--border-active); border-radius: 2px; }
        
        /* LAYOUT */
        .sidebar { width: 260px; background: var(--bg-panel); border-right: 1px solid var(--border); display: flex; flex-direction: column; flex-shrink: 0; z-index: 100; }
        .brand { height: 70px; display: flex; align-items: center; padding: 0 25px; border-bottom: 1px solid var(--border); font-family: var(--font-code); font-weight: 800; font-size: 14px; letter-spacing: 1px; color: var(--text-main); }
        .brand span { color: var(--gold); }
        .live-dot { width: 8px; height: 8px; background: var(--green); border-radius: 50%; margin-right: 12px; box-shadow: 0 0 10px var(--green); animation: blink 2s infinite; }
        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0.4; } 100% { opacity: 1; } }
        .nav-list { flex: 1; overflow-y: auto; padding: 25px 0; }
        .nav-label { padding: 0 25px 8px; font-family: var(--font-code); font-size: 10px; color: var(--text-dim); text-transform: uppercase; letter-spacing: 1px; margin-top: 25px; font-weight: 700; }
        .nav-btn { width: 100%; text-align: left; background: transparent; border: none; padding: 12px 25px; color: var(--text-dim); font-family: var(--font-head); font-size: 14px; font-weight: 500; cursor: pointer; border-left: 2px solid transparent; display: flex; align-items: center; justify-content: space-between; transition: all 0.2s; }
        .nav-btn:hover { color: var(--text-main); background: var(--bg-hover); padding-left: 30px; }
        .nav-btn.active { color: var(--cyan); background: var(--cyan-dim); border-left-color: var(--cyan); font-weight: 700; }
        .prog-tag { font-family: var(--font-code); font-size: 11px; padding: 2px 8px; background: transparent; color: var(--text-dim); border-radius: 4px; border: 1px solid var(--border); font-weight: 700; }

        .main { flex: 1; display: flex; flex-direction: column; overflow: hidden; position: relative; }
        .top-bar { height: 60px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; padding: 0 30px; background: var(--bg-panel); position: sticky; top: 0; z-index: 10; }
        .top-title { font-family: var(--font-code); font-size: 12px; color: var(--cyan); text-transform: uppercase; letter-spacing: 1px; font-weight: 700; }
        .theme-btn { background: transparent; border: 1px solid var(--border); color: var(--text-main); padding: 8px 16px; font-family: var(--font-code); font-size: 11px; cursor: pointer; text-transform: uppercase; font-weight: 600; }
        .scroll-area { flex: 1; overflow-y: auto; padding: 40px; }

        /* CONTENT STYLES */
        h1 { font-size: 36px; color: var(--text-main); margin-bottom: 5px; text-transform: uppercase; letter-spacing: -1px; line-height: 1; font-weight: 700; }
        h2 { font-size: 14px; color: var(--gold); font-family: var(--font-code); margin-bottom: 8px; letter-spacing: 2px; text-transform: uppercase; font-weight: 500; }
        .phase-header-grid { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; border-bottom: 1px solid var(--border); padding-bottom: 25px; }
        .earning-badge { font-family: var(--font-code); font-size: 14px; color: var(--cyan); background: var(--cyan-dim); padding: 12px 24px; border-radius: 4px; border: 1px solid var(--cyan); display: inline-block; font-weight: 800; box-shadow: 0 0 20px rgba(0, 240, 255, 0.1); }
        
        .grid-4 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 30px; }
        .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 30px; }
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin-bottom: 30px; }
        .grid-1 { display: grid; grid-template-columns: 1fr; gap: 25px; margin-bottom: 30px; }
        .card { background: var(--bg-card); border: 1px solid var(--border); padding: 25px; position: relative; height: 100%; transition: all 0.3s; }
        .card:hover { border-color: var(--border-active); transform: translateY(-3px); }
        .card.dense { padding: 20px; }
        
        .stat-label { font-family: var(--font-code); font-size: 10px; color: var(--text-dim); text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 8px; }
        .stat-val { font-family: var(--font-code); font-size: 26px; font-weight: 700; color: var(--text-main); letter-spacing: -1px; }
        .stat-val.gold { color: var(--gold); } .stat-val.cyan { color: var(--cyan); } .stat-val.green { color: var(--green); }
        .stat-sub { font-family: var(--font-code); font-size: 11px; color: var(--text-dim); margin-top: 5px; }
        .clock-box { display: flex; justify-content: space-between; align-items: flex-end; }
        
        /* ALERT BOX */
        .alert-box { background: linear-gradient(90deg, rgba(0,240,255,0.05) 0%, rgba(0,0,0,0) 100%); border: 1px solid var(--border-active); border-left: 4px solid var(--cyan); padding: 30px; display: flex; align-items: center; justify-content: space-between; margin-bottom: 30px; }
        .alert-content h4 { color: var(--cyan); font-family: var(--font-code); font-size: 11px; margin-bottom: 8px; }
        .alert-content p { font-size: 22px; font-weight: 600; color: var(--text-main); }
        .exec-btn { background: var(--cyan); color: var(--text-inv); border: none; padding: 15px 30px; font-family: var(--font-code); font-weight: 800; font-size: 12px; cursor: pointer; text-transform: uppercase; letter-spacing: 1px; }

        /* TASKS - CRITICAL FOR HIDING */
        .task-item { background: var(--bg-card); border: 1px solid var(--border); margin-bottom: 15px; }
        .task-header { padding: 20px 25px; display: flex; align-items: center; gap: 20px; cursor: pointer; user-select: none; }
        .checkbox { width: 22px; height: 22px; border: 1px solid var(--text-dim); background: var(--bg-void); display: flex; align-items: center; justify-content: center; }
        .task-item.completed .checkbox { background: var(--green); border-color: var(--green); color: #000; }
        .task-item.completed .checkbox::after { content: '✓'; font-weight: 800; font-size: 14px; }
        .task-title { font-size: 16px; font-weight: 500; color: var(--text-main); flex: 1; }
        
        /* THIS IS THE HIDING MECHANISM */
        .task-details { display: none; padding: 0 25px 30px 67px; border-top: 1px solid var(--border); background: var(--bg-panel); animation: slideDown 0.3s ease-out; }
        .task-item.open .task-details { display: block; }
        
        .detail-block { margin-bottom: 20px; position: relative; padding-left: 20px; border-left: 1px solid var(--border); margin-top: 25px; }
        .detail-title { font-family: var(--font-code); color: var(--gold); font-size: 11px; font-weight: 700; margin-bottom: 5px; }
        .detail-body { font-size: 14px; color: var(--text-dim); line-height: 1.6; }
        .target-box { margin-top: 20px; background: var(--gold-dim); border: 1px solid var(--gold); padding: 10px 15px; font-family: var(--font-code); font-size: 12px; color: var(--gold); display: flex; align-items: center; font-weight: 600; }
        .action-link { display: flex; align-items: center; justify-content: space-between; font-family: var(--font-code); font-size: 12px; color: var(--text-main); border: 1px solid var(--border); padding: 12px 20px; text-decoration: none; background: var(--bg-panel); font-weight: 600; width: 100%; margin-top:15px; }
        
        /* PROGRESS & TABS */
        .prog-container { margin-bottom: 30px; cursor: pointer; }
        .prog-label { display: flex; justify-content: space-between; color: var(--text-main); margin-bottom: 8px; font-family: var(--font-head); font-weight: 600; font-size: 14px; }
        .prog-track { height: 12px; background: var(--bg-hover); border-radius: 2px; border: 1px solid var(--border); overflow: hidden; }
        .prog-fill { height: 100%; transition: width 0.8s; }
        
        .section { display: none; }
        .section.active { display: block; animation: slideUpFade 0.5s; }
        @keyframes slideUpFade { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        /* MOBILE FIX */
        @media(max-width: 1100px) { 
            .grid-4, .grid-3 { grid-template-columns: 1fr 1fr; } 
            .calc-wrapper { flex-direction: column; } 
            .sidebar { width: 60px; }
            .nav-btn span, .brand span, .nav-label, .nav-btn { font-size: 0; padding: 15px; justify-content: center; }
            .brand { padding: 0 20px; } .nav-btn:hover { padding-left: 15px; }
            .sidebar:hover { width: 260px; position:absolute; height:100%; }
            .sidebar:hover .nav-btn { font-size: 14px; justify-content: space-between; padding: 12px 25px; }
            .sidebar:hover .nav-label { font-size: 10px; display:block; }
            .sidebar:hover .brand { font-size: 14px; }
        }
    </style>
</head>
<body>
<nav class="sidebar">
    <div class="brand"><div class="live-dot"></div>CAPITAL // OS</div>
    <div class="nav-list">
        <div class="nav-label">SYSTEM</div>
        <button class="nav-btn active" onclick="go('dashboard')">00 // DASHBOARD</button>
        <button class="nav-btn" onclick="go('finance')">01 // FINANCIAL ENGINE</button>
        <button class="nav-btn" onclick="go('intel')">02 // INTEL & RESOURCES</button>
        <div class="nav-label">GHOST PROTOCOL</div>
        <button class="nav-btn" onclick="go('p0')">P0 // GENESIS <span class="prog-tag" id="nav_p0">0%</span></button>
        <div class="nav-label">EXECUTION</div>
        <button class="nav-btn" onclick="go('p1')">P1 // FREELANCE <span class="prog-tag" id="nav_p1">0%</span></button>
        <button class="nav-btn" onclick="go('p2')">P2 // AGENCY <span class="prog-tag" id="nav_p2">0%</span></button>
        <button class="nav-btn" onclick="go('p3')">P3 // SAAS EXIT <span class="prog-tag" id="nav_p3">0%</span></button>
    </div>
</nav>

<div class="main">
    <div class="top-bar">
        <div class="top-title" id="current_phase_title">SYSTEM ACTIVE // ONLINE</div>
        <button class="theme-btn" onclick="toggleTheme()">Day / Night</button>
    </div>

    <div class="scroll-area">
        <div id="dashboard" class="section active">
            <div class="phase-header-grid">
                <div class="phase-info"><h2>LIVE OPERATIONS</h2><h1>MISSION CONTROL</h1></div>
            </div>
            <div class="alert-box">
                <div class="alert-content"><h4 id="hud_obj_label">CURRENT OBJECTIVE</h4><p id="hud_obj_text">SYSTEM INITIALIZATION...</p></div>
                <button class="exec-btn" id="hud_action">EXECUTE NOW</button>
            </div>
            <div class="grid-4">
                <div class="card dense">
                    <div class="clock-box"><span class="stat-label">NEW YORK</span><span class="clock-zone">EST</span></div>
                    <div class="stat-val" id="clock_nyc">--:--</div>
                </div>
                <div class="card dense">
                    <div class="clock-box"><span class="stat-label">IST</span><span class="clock-zone">IST</span></div>
                    <div class="stat-val" id="clock_ist">--:--</div>
                </div>
                <div class="card dense" style="border-left: 2px solid var(--gold);">
                    <span class="stat-label">80/20 FOCUS</span><div class="stat-val gold" style="font-size:20px;" id="hud_focus_val">FOUNDATION</div>
                </div>
                <div class="card dense">
                    <span class="stat-label">SYSTEM INTEGRITY</span><div class="stat-val cyan" id="sys_integrity">0%</div>
                </div>
            </div>
            <div class="grid-1"><div class="card"><span class="stat-label">PHASE PROGRESSION</span><div style="margin-top: 30px;">
                <div class="prog-container" onclick="go('p0')"><div class="prog-label"><span>P0: GHOST PROTOCOL</span><span id="txt_p0">0%</span></div><div class="prog-track"><div id="bar_p0" class="prog-fill" style="width:0%; background:var(--cyan);"></div></div></div>
                <div class="prog-container" onclick="go('p1')"><div class="prog-label"><span>P1: FIRST CLIENTS</span><span id="txt_p1">0%</span></div><div class="prog-track"><div id="bar_p1" class="prog-fill" style="width:0%; background:var(--text-dim);"></div></div></div>
                <div class="prog-container" onclick="go('p2')"><div class="prog-label"><span>P2: SCALE AGENCY</span><span id="txt_p2">0%</span></div><div class="prog-track"><div id="bar_p2" class="prog-fill" style="width:0%; background:var(--text-dim);"></div></div></div>
            </div></div></div>
        </div>
        <div id="finance" class="section">
            <div class="phase-header-grid"><div class="phase-info"><h2>UNIFIED CALCULATOR</h2><h1>FINANCIAL ENGINE</h1></div></div>
            <div class="calc-tabs">
                <button class="c-tab active" onclick="ftab('f1')">PHASE 1 (FREELANCE)</button>
                <button class="c-tab" onclick="ftab('f2')">PHASE 2 (AGENCY)</button>
                <button class="c-tab" onclick="ftab('f3')">PHASE 3 (EXIT)</button>
            </div>
            
            <div id="f1" class="tab-content active">
                <div class="calc-wrapper">
                    <div class="calc-panel"><span class="stat-label">VARIABLES</span>
                        <label class="stat-label">Hourly Rate ($)</label><input type="number" class="inp-field" id="in_f1_rate" value="75" oninput="c1()">
                        <br><br><label class="stat-label">Hours / Week</label><input type="number" class="inp-field" id="in_f1_hrs" value="30" oninput="c1()">
                    </div>
                    <div class="calc-panel output"><span class="stat-label">ANNUAL GROSS</span><div class="stat-val green" id="out_f1_yr">$108,000</div></div>
                </div>
            </div>

            <div id="f2" class="tab-content hidden" style="display:none;">
                <div class="calc-wrapper">
                    <div class="calc-panel"><span class="stat-label">REVENUE SOURCES</span>
                        <div class="grid-2" style="margin-bottom:10px; gap:10px;">
                            <div><label class="stat-label">Retainer ($)</label><input type="number" class="inp-field" id="in_f2_ret" value="5000" oninput="c2()"></div>
                            <div><label class="stat-label">Clients (#)</label><input type="number" class="inp-field" id="in_f2_cli" value="10" oninput="c2()"></div>
                        </div>
                        <div class="grid-2" style="margin-bottom:20px; gap:10px;">
                            <div><label class="stat-label">Project Fee ($)</label><input type="number" class="inp-field" id="in_f2_proj" value="15000" oninput="c2()"></div>
                            <div><label class="stat-label">Proj/Mo (#)</label><input type="number" class="inp-field" id="in_f2_pcount" value="2" oninput="c2()"></div>
                        </div>
                        <span class="stat-label" style="border-top:1px solid #333; padding-top:10px;">TEAM COSTS</span>
                        <div class="grid-2" style="margin-top:10px; gap:10px;">
                            <div><label class="stat-label">Staff Count</label><input type="number" class="inp-field" id="in_f2_staff" value="3" oninput="c2()"></div>
                            <div><label class="stat-label">Avg Salary</label><input type="number" class="inp-field" id="in_f2_sal" value="5000" oninput="c2()"></div>
                        </div>
                    </div>
                    <div class="calc-panel output">
                        <span class="stat-label">NET PROFIT (MO)</span><div class="stat-val green" id="out_f2_net">$65,000</div>
                        <span class="stat-label" style="margin-top:20px;">ANNUAL RUN RATE</span><div class="stat-val gold" id="out_f2_run">$960,000</div>
                    </div>
                </div>
            </div>

            <div id="f3" class="tab-content hidden" style="display:none;">
                <div class="calc-wrapper">
                    <div class="calc-panel"><span class="stat-label">VARIABLES</span>
                        <label class="stat-label">License ($/Yr)</label><input type="number" class="inp-field" id="in_f3_lic" value="3000" oninput="c3()">
                        <br><br><label class="stat-label">Total Users</label><input type="number" class="inp-field" id="in_f3_users" value="350" oninput="c3()">
                        <br><br><label class="stat-label">Exit Multiple (x)</label><input type="number" class="inp-field" id="in_f3_mult" value="5" oninput="c3()">
                    </div>
                    <div class="calc-panel output">
                        <span class="stat-label">ARR</span><div class="stat-val green" id="out_f3_arr">$1.05M</div>
                        <span class="stat-label" style="margin-top:20px;">EXIT VALUATION</span><div class="stat-val green" id="out_f3_exit">$5.25M</div>
                    </div>
                </div>
            </div>
            
            <style>.inp-field { width: 100%; padding: 10px; background: #000; color: #fff; border: 1px solid #333; font-family: monospace; margin-top:5px; }</style>
        </div>

        <div id="intel" class="section">
            <div class="phase-header-grid"><div class="phase-info"><h2>DATABASE</h2><h1>INTEL & RESOURCES</h1></div></div>
            <div class="grid-3">
                <div class="card"><span class="stat-label">CORE TRAINING</span><h3>SALESFORCE ADMIN</h3><a href="https://trailhead.salesforce.com/en/credentials/administrator" target="_blank" class="action-link"><div>START TRAILHEAD</div><span>↗</span></a></div>
                <div class="card"><span class="stat-label">NICHE SPECIALTY</span><h3>FINANCIAL CLOUD</h3><a href="https://developer.salesforce.com/docs/atlas.en-us.financial_services_cloud_admin_guide.meta/financial_services_cloud_admin_guide/fsc_admin_guide_intro.htm" target="_blank" class="action-link"><div>DEV GUIDE</div><span>↗</span></a></div>
                <div class="card"><span class="stat-label">DOMAIN KNOWLEDGE</span><h3>INVESTOPEDIA</h3><a href="https://www.investopedia.com/terms/w/wealthmanagement.asp" target="_blank" class="action-link"><div>READ DEFINITIONS</div><span>↗</span></a></div>
            </div>
        </div>
        <div id="p0" class="section">
            <div class="phase-header-grid"><h1>GHOST PROTOCOL</h1><span class="earning-badge">POTENTIAL: $0</span></div>
            <div class="task-item" id="t0_1">
                <div class="task-header" onclick="toggleAccordion('t0_1')">
                    <div class="check-target" onclick="toggleCheck(event, 't0_1')"><div class="checkbox"></div></div><div class="task-title">1. Hardware & Environment</div><div class="task-meta">SETUP</div>
                </div>
                <div class="task-details">
                    <div class="target-box">TARGET: DEV ORG READY</div>
                    <div class="detail-block"><div class="detail-body">1. Purchase Dell Latitude. <br>2. Sign up for Salesforce Developer Edition.</div></div>
                    <a href="https://developer.salesforce.com/signup" target="_blank" class="action-link"><div>SIGNUP</div><span>↗</span></a>
                </div>
            </div>
            <div class="task-item" id="t0_2">
                <div class="task-header" onclick="toggleAccordion('t0_2')">
                    <div class="check-target" onclick="toggleCheck(event, 't0_2')"><div class="checkbox"></div></div><div class="task-title">2. Admin Certification</div><div class="task-meta">LEARNING</div>
                </div>
                <div class="task-details">
                    <div class="target-box">TARGET: PASS EXAM</div>
                    <div class="detail-block"><div class="detail-body">Daily Routine: 90 Mins Trailhead, 30 Mins Focus on Force.</div></div>
                </div>
            </div>
             <div class="task-item" id="t0_3">
                <div class="task-header" onclick="toggleAccordion('t0_3')">
                    <div class="check-target" onclick="toggleCheck(event, 't0_3')"><div class="checkbox"></div></div><div class="task-title">3. Portfolio Build</div><div class="task-meta">BUILD</div>
                </div>
                <div class="task-details"><div class="target-box">TARGET: DEMO VIDEO</div><div class="detail-block"><div class="detail-body">Build "WealthWise" Schema. Record Loom video.</div></div></div>
            </div>
        </div>

        <div id="p1" class="section">
            <div class="phase-header-grid"><h1>FREELANCE: THE HUNT</h1><span class="earning-badge">POTENTIAL: $6.5K/MO</span></div>
            <div class="task-item" id="t1_1">
                <div class="task-header" onclick="toggleAccordion('t1_1')">
                    <div class="check-target" onclick="toggleCheck(event, 't1_1')"><div class="checkbox"></div></div><div class="task-title">1. LinkedIn Optimization</div><div class="task-meta">BRAND</div>
                </div>
                <div class="task-details"><div class="target-box">TARGET: PROFILE READY</div><div class="detail-block"><div class="detail-body">Headline: Salesforce FSC Architect for Wealth Management.</div></div></div>
            </div>
            <div class="task-item" id="t1_2">
                <div class="task-header" onclick="toggleAccordion('t1_2')">
                    <div class="check-target" onclick="toggleCheck(event, 't1_2')"><div class="checkbox"></div></div><div class="task-title">2. Portfolio Website</div><div class="task-meta">MARKETING</div>
                </div>
                <div class="task-details"><div class="target-box">TARGET: LIVE URL</div><div class="detail-block"><div class="detail-body">Use Carrd.co + Namecheap. Upload Loom demo.</div></div></div>
            </div>
            <div class="task-item" id="t1_3">
                <div class="task-header" onclick="toggleAccordion('t1_3')">
                    <div class="check-target" onclick="toggleCheck(event, 't1_3')"><div class="checkbox"></div></div><div class="task-title">3. Payment Rails (Wise)</div><div class="task-meta">FINANCE</div>
                </div>
                <div class="task-details"><div class="target-box">TARGET: USD ACCOUNT</div><div class="detail-block"><div class="detail-body">Open Wise Business for ACH details + FIRC.</div></div></div>
            </div>
        </div>
        <div id="p2" class="section">
            <div class="phase-header-grid"><h1>AGENCY: SCALING</h1><span class="earning-badge">POTENTIAL: $83K/MO</span></div>
            <div class="task-item" id="t2_1">
                <div class="task-header" onclick="toggleAccordion('t2_1')"><div class="check-target" onclick="toggleCheck(event, 't2_1')"><div class="checkbox"></div></div><div class="task-title">1. Legal Infrastructure</div></div>
                <div class="task-details"><div class="target-box">TARGET: E&O INSURANCE</div><div class="detail-block"><div class="detail-body">Get Errors & Omissions Insurance. Draft Standard NDA.</div></div></div>
            </div>
            <div class="task-item" id="t2_2">
                <div class="task-header" onclick="toggleAccordion('t2_2')"><div class="check-target" onclick="toggleCheck(event, 't2_2')"><div class="checkbox"></div></div><div class="task-title">2. First Hire</div></div>
                <div class="task-details"><div class="target-box">TARGET: DELEGATION</div><div class="detail-block"><div class="detail-body">Hire Junior Admin for "Clicks". You do "Architecture".</div></div></div>
            </div>
        </div>

        <div id="p3" class="section">
            <div class="phase-header-grid"><h1>SAAS: THE EXIT</h1><span class="earning-badge">POTENTIAL: $10M EXIT</span></div>
            <div class="task-item" id="t3_1">
                <div class="task-header" onclick="toggleAccordion('t3_1')"><div class="check-target" onclick="toggleCheck(event, 't3_1')"><div class="checkbox"></div></div><div class="task-title">1. Market Validation</div></div>
                <div class="task-details"><div class="target-box">TARGET: 10 PRE-ORDERS</div><div class="detail-block"><div class="detail-body">Run LinkedIn Ads before coding. Verify the pain point.</div></div></div>
            </div>
             <div class="task-item" id="t3_2">
                <div class="task-header" onclick="toggleAccordion('t3_2')"><div class="check-target" onclick="toggleCheck(event, 't3_2')"><div class="checkbox"></div></div><div class="task-title">2. Security Review</div></div>
                <div class="task-details"><div class="target-box">TARGET: PASSED</div><div class="detail-block"><div class="detail-body">Run Checkmarx scans. Pay listing fee.</div></div></div>
            </div>
        </div>

    </div>
</div>

<script>
    // NAVIGATION
    function go(id) {
        document.querySelectorAll('.section').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.querySelector('.scroll-area').scrollTo({ top: 0, behavior: 'smooth' });
        document.querySelectorAll('.nav-btn').forEach(btn => { if(btn.getAttribute('onclick').includes(id)) btn.classList.add('active'); });
    }
    // TABS
    function ftab(id) {
        document.querySelectorAll('.tab-content').forEach(el => el.style.display = 'none');
        document.querySelectorAll('.c-tab').forEach(el => el.classList.remove('active'));
        if(document.getElementById(id)) document.getElementById(id).style.display = 'block';
        event.target.classList.add('active');
    }
    // THEME
    function toggleTheme() { document.body.classList.toggle('light-mode'); }
    
    // ACCORDION (THE HIDING LOGIC)
    function toggleAccordion(id) { document.getElementById(id).classList.toggle('open'); }

    // CHECKBOX STATE
    function toggleCheck(e, id) {
        e.stopPropagation();
        document.getElementById(id).classList.toggle('completed');
        saveState(); updateHUD();
    }
    
    // SAVE & LOAD
    const allTasks = ['t0_1','t0_2','t0_3','t1_1','t1_2','t1_3','t2_1','t2_2','t3_1','t3_2'];
    function saveState() {
        allTasks.forEach(id => { localStorage.setItem('capital_' + id, document.getElementById(id).classList.contains('completed')); });
    }
    function loadState() {
        allTasks.forEach(id => { if(localStorage.getItem('capital_' + id) === 'true') document.getElementById(id).classList.add('completed'); });
        updateHUD(); setInterval(() => { document.getElementById('clock_nyc').innerText = new Date().toLocaleTimeString('en-US', {timeZone:'America/New_York',hour12:false,hour:'2-digit',minute:'2-digit'}); document.getElementById('clock_ist').innerText = new Date().toLocaleTimeString('en-US', {timeZone:'Asia/Kolkata',hour12:false,hour:'2-digit',minute:'2-digit'}); }, 1000);
    }
    
    // HUD UPDATES
    function updateHUD() {
        let done = allTasks.filter(id => document.getElementById(id).classList.contains('completed')).length;
        let pct = Math.round((done / allTasks.length) * 100);
        document.getElementById('sys_integrity').innerText = pct + '%';
        // Next step logic
        let next = allTasks.find(id => !document.getElementById(id).classList.contains('completed'));
        if(next) {
            document.getElementById('hud_obj_text').innerText = document.getElementById(next).querySelector('.task-title').innerText;
            document.getElementById('hud_action').setAttribute('onclick', `go('${next.substring(0,2).replace('t','p')}'); setTimeout(()=>{document.getElementById('${next}').scrollIntoView({behavior:'smooth'}); toggleAccordion('${next}');}, 300)`);
        }
    }
    
    // CALCULATORS
    function c1() { 
        let v = (id) => parseFloat(document.getElementById(id).value)||0; 
        let wk = v('in_f1_rate') * v('in_f1_hrs');
        document.getElementById('out_f1_yr').innerText = '$' + (wk * 48).toLocaleString(); 
    }
    function c2() {
        let v = (id) => parseFloat(document.getElementById(id).value)||0;
        let rev = (v('in_f2_ret')*v('in_f2_cli')) + (v('in_f2_proj')*v('in_f2_pcount'));
        let profit = rev - (v('in_f2_staff')*v('in_f2_sal'));
        document.getElementById('out_f2_net').innerText = '$' + profit.toLocaleString();
        document.getElementById('out_f2_run').innerText = '$' + (rev * 12).toLocaleString();
    }
    function c3() {
        let v = (id) => parseFloat(document.getElementById(id).value)||0;
        let arr = v('in_f3_lic') * v('in_f3_users');
        document.getElementById('out_f3_arr').innerText = '$' + (arr/1000000).toFixed(2) + 'M';
        document.getElementById('out_f3_exit').innerText = '$' + ((arr * v('in_f3_mult'))/1000000).toFixed(2) + 'M';
    }

    // INIT
    window.onload = function() { loadState(); c1(); c2(); c3(); }
</script>
</body>
</html>
